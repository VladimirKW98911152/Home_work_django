{% extends 'flatpages/default.html' %}

{% load custom_filters %}

{% block title %}{{ post.title|censor }}{% endblock %}

{% block content %}
    <h1>{{ post.title|censor }}</h1>
    
    <div style="color: #666; font-size: 0.9em; margin-bottom: 20px;">
        <strong>Дата публикации:</strong> {{ post.dateCreation|date:"d.m.Y H:i" }}<br>
        <strong>Автор:</strong> {{ post.author.authorUser.username }}<br>
        <strong>Тип:</strong> 
        {% if post.categoryType == 'NW' %}Новость{% else %}Статья{% endif %}
    </div>
    
    <hr>

    <div style="font-size: 1.1em; line-height: 1.6;">
        {{ post.text|censor|linebreaks }}
    </div>
    
    <hr>
    
    <p style="text-align: center;">
        <a href="/news/">← Вернуться ко всем новостям</a>
    </p>
    <hr>
    <div style="margin-top: 20px; display: flex; gap: 10px;">
    {% if user.is_authenticated and user.groups.filter.name == 'authors' %}
        {% if post.categoryType == 'NW' %}
        <a href="{% url 'news_edit' post.id %}" style="padding: 8px 16px; background-color: #ffc107; color: black; text-decoration: none; border-radius: 4px;">
            Редактировать
        </a>
        <a href="{% url 'news_delete' post.id %}" style="padding: 8px 16px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 4px;">
            Удалить
        </a>
        {% else %}
        <a href="{% url 'article_edit' post.id %}" style="padding: 8px 16px; background-color: #ffc107; color: black; text-decoration: none; border-radius: 4px;">
            Редактировать
        </a>
        <a href="{% url 'article_delete' post.id %}" style="padding: 8px 16px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 4px;">
            Удалить
        </a>
        {% endif %}
    {% endif %}
    
    <a href="/news/" style="padding: 8px 16px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 4px;">
        ← Вернуться ко всем новостям
    </a>
</div>
{% endblock %}
